name: generate_diagram
server: mermaid
category: ui
description: Generate a diagram image from Mermaid syntax. Outputs PNG or SVG.

inputSchema:
  type: object
  properties:
    diagram:
      type: string
      description: Mermaid diagram syntax
    format:
      type: string
      description: Output format (png or svg)
      default: png
    theme:
      type: string
      description: Diagram theme (default, dark, forest, neutral)
      default: default
  required:
    - diagram

example: |
  const diagram = await mermaid.generate_diagram({
    diagram: `
      graph TD
        A[User Request] --> B{Auth Check}
        B -->|Valid| C[Process]
        B -->|Invalid| D[Reject]
        C --> E[Response]
    `,
    format: "png",
    theme: "dark"
  });

  // Save to workspace
  await workspace.writeBuffer("architecture.png", Buffer.from(diagram.content[0].data, "base64"));

notes: |
  - Supports all Mermaid diagram types (flowchart, sequence, class, etc)
  - Returns base64-encoded image data
  - Use workspace.writeBuffer to save the image
