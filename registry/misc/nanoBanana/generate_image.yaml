name: generate_image
server: nanoBanana
category: misc
description: |-
  Generate new images or edit existing images using natural language instructions.

  Supports multiple input modes:
  1. Pure generation: Just provide a prompt to create new images
  2. Multi-image conditioning: Provide up to 3 input images using input_image_path_1/2/3 parameters
  3. File ID editing: Edit previously uploaded images using Files API ID
  4. File path editing: Edit local images by providing single input image path

  Automatically detects mode based on parameters or can be explicitly controlled.
  Input images are read from the local filesystem to avoid massive token usage.
  Returns both MCP image content blocks and structured JSON with metadata.
inputSchema:
  type: object
  properties:
    prompt:
      description: >-
        Clear, detailed image prompt. Include subject, composition, action, location, style, and any text to render. Use
        the aspect_ratio parameter to pin a specific canvas shape when needed.
      maxLength: 8192
      minLength: 1
      type: string
    'n':
      default: 1
      description: Requested image count (model may return fewer).
      maximum: 4
      minimum: 1
      type: integer
    negative_prompt:
      anyOf:
        - maxLength: 1024
          type: string
        - type: 'null'
      default: null
      description: Things to avoid (style, objects, text).
    system_instruction:
      anyOf:
        - maxLength: 512
          type: string
        - type: 'null'
      default: null
      description: Optional system tone/style guidance.
    input_image_path_1:
      anyOf:
        - type: string
        - type: 'null'
      default: null
      description: Path to first input image for composition/conditioning
    input_image_path_2:
      anyOf:
        - type: string
        - type: 'null'
      default: null
      description: Path to second input image for composition/conditioning
    input_image_path_3:
      anyOf:
        - type: string
        - type: 'null'
      default: null
      description: Path to third input image for composition/conditioning
    file_id:
      anyOf:
        - type: string
        - type: 'null'
      default: null
      description: >-
        Files API file ID to use as input/edit source (e.g., 'files/abc123'). If provided, this takes precedence over
        input_image_path_* parameters for the primary input.
    mode:
      default: auto
      description: >-
        Operation mode: 'generate' for new image creation, 'edit' for modifying existing images. Auto-detected based on
        input parameters if not specified.
      type: string
    model_tier:
      anyOf:
        - type: string
        - type: 'null'
      default: auto
      description: >-
        Model tier: 'flash' (speed, 1024px), 'pro' (quality, up to 4K), or 'auto' (smart selection). Default: 'auto' -
        automatically selects based on prompt quality/speed indicators.
    resolution:
      anyOf:
        - type: string
        - type: 'null'
      default: high
      description: 'Output resolution: ''high'', ''4k'', ''2k'', ''1k''. 4K and 2K only available with ''pro'' model. Default: ''high''.'
    thinking_level:
      anyOf:
        - type: string
        - type: 'null'
      default: high
      description: >-
        Reasoning depth for Pro model: 'low' (faster), 'high' (better quality). Only applies to Pro model. Default:
        'high'.
    enable_grounding:
      default: true
      description: >-
        Enable Google Search grounding for factual accuracy (Pro model only). Useful for real-world subjects. Default:
        true.
      type: boolean
    aspect_ratio:
      anyOf:
        - enum:
            - '1:1'
            - '2:3'
            - '3:2'
            - '3:4'
            - '4:3'
            - '4:5'
            - '5:4'
            - '9:16'
            - '16:9'
            - '21:9'
          type: string
        - type: 'null'
      default: null
      description: >-
        Optional output aspect ratio (e.g., '16:9'). See docs for supported values: 1:1, 2:3, 3:2, 3:4, 4:3, 4:5, 5:4,
        9:16, 16:9, 21:9.
    output_path:
      anyOf:
        - type: string
        - type: 'null'
      default: null
      description: >-
        Output path for generated image(s). If a file path with extension (e.g., '/path/image.png'), saves directly to
        that path. If a directory path (e.g., '/path/to/dir/'), uses default filename in that directory. If None, uses
        IMAGE_OUTPUT_DIR environment variable or ~/nanobanana-images.
  required:
    - prompt
example: |-
  await nanoBanana["generate_image"]({
    prompt: "<prompt>",
    n: 0,
    negative_prompt: "<negative_prompt>"
  });
